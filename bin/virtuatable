#!/usr/bin/env ruby
require 'thor'
require 'date'
require 'faraday'
require 'json'
require 'octokit'
require 'yaml'
require 'singleton'
require 'semantic'
require 'git'
require 'logger'

autoload :Factories, File.join(__dir__, 'factories.rb')
autoload :Commands, File.join(__dir__, 'commands.rb')

require File.join(__dir__, 'lib', 'string.rb')
require File.join(__dir__, 'lib', 'files', 'dockerfile.rb')

class Command < Thor

  desc 'docker', 'manage docker tags and Dockerfile'
  subcommand 'docker', Commands::Docker

  desc 'kube', 'manage kube configuration and infrastructure'
  subcommand 'kube', Commands::Kube

  def self.exit_on_failure?
    true
  end
end

Command.start